{
  "version": 3,
  "sources": ["../../../../app/routes/($locale).search.jsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\($locale).search.jsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\($locale).search.jsx\");\n  import.meta.hot.lastModified = \"1696849699251.823\";\n}\n// REMIX HMR END\n\nimport { defer } from '@shopify/remix-oxygen';\nimport { Await, Form, useLoaderData } from '@remix-run/react';\nimport { Suspense } from 'react';\nimport { Pagination, getPaginationVariables } from '@shopify/hydrogen';\nimport { FeaturedCollections, Grid, Heading, Input, PageHeader, ProductCard, ProductSwimlane, Section, Text } from '~/components';\nimport { PRODUCT_CARD_FRAGMENT } from '~/data/fragments';\nimport { getImageLoadingPriority, PAGINATION_SIZE } from '~/lib/const';\nimport { seoPayload } from '~/lib/seo.server';\nimport { getFeaturedData } from './($locale).featured-products';\nexport async function loader({\n  request,\n  context: {\n    storefront\n  }\n}) {\n  const searchParams = new URL(request.url).searchParams;\n  const searchTerm = searchParams.get('q');\n  const variables = getPaginationVariables(request, {\n    pageBy: 8\n  });\n  const {\n    products\n  } = await storefront.query(SEARCH_QUERY, {\n    variables: {\n      searchTerm,\n      ...variables,\n      country: storefront.i18n.country,\n      language: storefront.i18n.language\n    }\n  });\n  const shouldGetRecommendations = !searchTerm || products?.nodes?.length === 0;\n  const seo = seoPayload.collection({\n    url: request.url,\n    collection: {\n      id: 'search',\n      title: 'Search',\n      handle: 'search',\n      descriptionHtml: 'Search results',\n      description: 'Search results',\n      seo: {\n        title: 'Search',\n        description: `Showing ${products.nodes.length} search results for \"${searchTerm}\"`\n      },\n      metafields: [],\n      products,\n      updatedAt: new Date().toISOString()\n    }\n  });\n  return defer({\n    seo,\n    searchTerm,\n    products,\n    noResultRecommendations: shouldGetRecommendations ? getNoResultRecommendations(storefront) : Promise.resolve(null)\n  });\n}\nexport default function Search() {\n  _s();\n  const {\n    searchTerm,\n    products,\n    noResultRecommendations\n  } = useLoaderData();\n  const noResults = products?.nodes?.length === 0;\n  return <>\r\n      <PageHeader>\r\n        <Heading as=\"h1\" size=\"copy\">\r\n          Search\r\n        </Heading>\r\n        <Form method=\"get\" className=\"relative flex w-full text-heading\">\r\n          <Input defaultValue={searchTerm} name=\"q\" placeholder=\"Search\u2026\" type=\"search\" variant=\"search\" />\r\n          <button className=\"absolute right-0 py-2\" type=\"submit\">\r\n            Go\r\n          </button>\r\n        </Form>\r\n      </PageHeader>\r\n      {!searchTerm || noResults ? <NoResults noResults={noResults} recommendations={noResultRecommendations} /> : <Section>\r\n          <Pagination connection={products}>\r\n            {({\n          nodes,\n          isLoading,\n          NextLink,\n          PreviousLink\n        }) => {\n          const itemsMarkup = nodes.map((product, i) => <ProductCard key={product.id} product={product} loading={getImageLoadingPriority(i)} />);\n          return <>\r\n                  <div className=\"flex items-center justify-center mt-6\">\r\n                    <PreviousLink className=\"inline-block rounded font-medium text-center py-3 px-6 border border-primary/10 bg-contrast text-primary w-full\">\r\n                      {isLoading ? 'Loading...' : 'Previous'}\r\n                    </PreviousLink>\r\n                  </div>\r\n                  <Grid data-test=\"product-grid\">{itemsMarkup}</Grid>\r\n                  <div className=\"flex items-center justify-center mt-6\">\r\n                    <NextLink className=\"inline-block rounded font-medium text-center py-3 px-6 border border-primary/10 bg-contrast text-primary w-full\">\r\n                      {isLoading ? 'Loading...' : 'Next'}\r\n                    </NextLink>\r\n                  </div>\r\n                </>;\n        }}\r\n          </Pagination>\r\n        </Section>}\r\n    </>;\n}\n_s(Search, \"FVtPDI3TTUuNt0oi42A2sqkWXlU=\", false, function () {\n  return [useLoaderData];\n});\n_c = Search;\nfunction NoResults({\n  noResults,\n  recommendations\n}) {\n  return <>\r\n      {noResults && <Section padding=\"x\">\r\n          <Text className=\"opacity-50\">\r\n            No results, try a different search.\r\n          </Text>\r\n        </Section>}\r\n      <Suspense>\r\n        <Await errorElement=\"There was a problem loading related products\" resolve={recommendations}>\r\n          {result => {\n          if (!result) return null;\n          const {\n            featuredCollections,\n            featuredProducts\n          } = result;\n          return <>\r\n                <FeaturedCollections title=\"Trending Collections\" collections={featuredCollections} />\r\n                <ProductSwimlane title=\"Trending Products\" products={featuredProducts} />\r\n              </>;\n        }}\r\n        </Await>\r\n      </Suspense>\r\n    </>;\n}\n_c2 = NoResults;\nexport function getNoResultRecommendations(storefront) {\n  return getFeaturedData(storefront, {\n    pageBy: PAGINATION_SIZE\n  });\n}\nconst SEARCH_QUERY = `#graphql\n  query PaginatedProductsSearch(\n    $country: CountryCode\n    $endCursor: String\n    $first: Int\n    $language: LanguageCode\n    $last: Int\n    $searchTerm: String\n    $startCursor: String\n  ) @inContext(country: $country, language: $language) {\n    products(\n      first: $first,\n      last: $last,\n      before: $startCursor,\n      after: $endCursor,\n      sortKey: RELEVANCE,\n      query: $searchTerm\n    ) {\n      nodes {\n        ...ProductCard\n      }\n      pageInfo {\n        startCursor\n        endCursor\n        hasNextPage\n        hasPreviousPage\n      }\n    }\n  }\n\n  ${PRODUCT_CARD_FRAGMENT}\n`;\nvar _c, _c2;\n$RefreshReg$(_c, \"Search\");\n$RefreshReg$(_c2, \"NoResults\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react"]
}
